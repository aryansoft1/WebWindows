
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>æˆéƒ½äºšåŸè½¯ä»¶æœ‰é™å…¬å¸-é¦–é¡µ</title>
  <link rel="icon" href="assets/icons/logo_large.png">
  <style>
    body {
      background: url('assets/icons/wall_aryan.jpg') no-repeat center center fixed;
      background-size: cover;
      margin: 0;
      padding: 0;
      font-family: "Segoe UI", sans-serif;
      overflow: hidden;
    }
    .desktop {
      position: absolute;
      top: 40px;
      left: 20px;
      display: flex;
      flex-direction: column;
      gap: 28px;
    }
    .icon {
      width: 72px;
      text-align: center;
      cursor: pointer;
    }
    .icon img {
      width: 64px;
      height: 64px;
      padding: 6px;
      object-fit: contain;
      background-color: transparent;
      border-radius: 12px;
      transition: background 0.3s;
    }
    .icon:hover img {
      background-color: rgba(255, 255, 255, 0.2);
    }
    .icon label {
      display: block;
      font-size: 12px;
      color: white;
      margin-top: 4px;
    }
    .taskbar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 42px;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(6px);
      display: flex;
      align-items: center;
      padding: 0 12px;
      box-shadow: 0 -1px 4px rgba(0, 0, 0, 0.3);
    }
    .start-button {
      width: 38px;
      height: 38px;
      background: rgba(255, 255, 255, 0.4);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 12px;
      cursor: pointer;
    }
    .start-button img {
      width: 28px;
      height: 28px;
      object-fit: contain;
    }
    .start-menu {
      display: none;
      position: fixed;
      bottom: 50px;
      left: 10px;
      width: 220px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(0,0,0,0.3);
      padding: 16px;
    }
    .start-menu h4 {
      margin-top: 0;
      font-size: 16px;
      color: #222;
      border-bottom: 1px solid #ccc;
      padding-bottom: 8px;
    }
    .start-menu ul {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }
    .start-menu li {
      padding: 6px 0;
      color: #333;
      cursor: pointer;
    }
    .start-menu li:hover {
      background: rgba(0, 0, 0, 0.05);
    }
  </style>

  <link rel="stylesheet" href="widgets/weather_time_widget.css">
  <script defer src="widgets/weather_time_widget_v3.js"></script>

<style>
#taskbar-time { bottom: 12px !important; }
</style>

<style>
#calendar-popup {
  position: fixed;
  bottom: 60px;
  right: 10px;
  background: #1e1e1e;
  color: white;
  padding: 14px;
  border-radius: 10px;
  display: none;
  box-shadow: 0 4px 20px rgba(0,0,0,0.4);
  width: 220px;
  font-family: 'Segoe UI', sans-serif;
  z-index: 9999;
}
#calendar-popup header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}
#calendar-popup button {
  background: none;
  border: none;
  color: white;
  font-size: 16px;
  cursor: pointer;
}
#calendar-popup h4 {
  margin: 0;
  font-size: 16px;
}
#calendar-popup .days {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}
#calendar-popup .day {
  width: 26px;
  height: 26px;
  line-height: 26px;
  text-align: center;
  border-radius: 4px;
  background: #333;
  font-size: 13px;
}
#calendar-popup .today {
  background: #0078D7;
}
</style>

</head>
<body>
  <div class="desktop">
    <div class="icon"><img src="assets/icons/web.png"><label>ç½‘ç«™å»ºè®¾</label></div>
    <div class="icon"><img src="assets/icons/cloud.png"><label>äº‘æœåŠ¡</label></div>
    <div class="icon" id="software" onclick="openWindow('software', 'è½¯ä»¶å¼€å‘', 'software.html')" style="cursor: pointer;">
  <img src="assets/icons/code.png">
  <label>è½¯ä»¶å¼€å‘</label>
</div>
    <div class="icon"><img src="assets/icons/japan.png"><label>å¯¹æ—¥å¤–åŒ…</label></div>
    <div class="icon"><img src="assets/icons/news.png"><label>æ–°é—»ä¸­å¿ƒ</label></div>
    <div class="icon"><img src="assets/icons/contact.png"><label>è”ç³»æˆ‘ä»¬</label></div>
  </div>
  <div class="taskbar">
<div id="taskbar-time" onclick="toggleCalendar()" style="position:absolute; bottom:12px; right:10px; text-align:right; color:white; font-size:12px; line-height:1.2;">
  <div id="clock-time">--:--</div>
  <div id="clock-date">YYYY/MM/DD</div>
</div>
<div id="calendar" style="display:none; position:absolute; bottom:42px; right:10px; background:#fff; border:1px solid #ccc; padding:10px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); z-index:2000;"></div>

    <div class="start-button" onclick="toggleStartMenu()">
      <img src="assets/icons/logo_large.png" alt="å¼€å§‹">
    </div>
  </div>
  <div class="start-menu" id="startMenu">
    <h4>å¼€å§‹èœå•</h4>
    <ul>
      <li>æ§åˆ¶é¢æ¿</li>
      <li>ä¸ªæ€§åŒ–</li>
      <li>ç³»ç»Ÿä¿¡æ¯</li>
    </ul>
  </div>
  


<script>
function openWindow(id, title, url) {
  if (document.getElementById("win-" + id)) return;

  const win = document.createElement("div");
  win.className = "window";
  win.id = "win-" + id;
  win.style.position = "absolute";
  win.style.top = "120px";
  win.style.left = "120px";
  win.style.width = "600px";
  win.style.height = "400px";
  win.style.background = "#fff";
  win.style.borderRadius = "10px";
  win.style.boxShadow = "0 0 10px rgba(0,0,0,0.2)";
  win.style.overflow = "hidden";
  win.style.zIndex = "1001";

  const titleBar = document.createElement("div");
  titleBar.style.background = "#0078d4";
  titleBar.style.color = "white";
  titleBar.style.padding = "8px";
  titleBar.style.fontSize = "14px";
  titleBar.style.cursor = "move";
  titleBar.style.display = "flex";
  titleBar.style.justifyContent = "space-between";
  titleBar.innerHTML = `<span>${title}</span>
    <span>
      <button onclick="minimizeWindow('win-${id}')" style='margin-right:4px'>ğŸ—•</button>
      <button onclick="maximizeWindow('win-${id}')" style='margin-right:4px'>ğŸ—–</button>
      <button onclick="closeWindow('win-${id}')">âœ•</button>
    </span>`;

  const content = document.createElement("div");
  content.style.height = "calc(100% - 40px)";
  content.style.overflow = "auto";
  content.style.background = "white";

  fetch(url)
    .then(resp => resp.text())
    .then(html => content.innerHTML = html)
    .catch(() => content.innerHTML = "<p style='padding:1rem'>åŠ è½½å¤±è´¥ï¼š" + url + "</p>");

  win.appendChild(titleBar);
  win.appendChild(content);
  document.body.appendChild(win);

  // æ‹–åŠ¨é€»è¾‘
  let offsetX, offsetY;
  titleBar.onmousedown = function (e) {
    offsetX = e.clientX - win.offsetLeft;
    offsetY = e.clientY - win.offsetTop;
    document.onmousemove = function (e) {
      win.style.left = e.clientX - offsetX + "px";
      win.style.top = e.clientY - offsetY + "px";
    };
    document.onmouseup = function () {
      document.onmousemove = null;
      document.onmouseup = null;
    };
  };
}

function closeWindow(id) {
  const el = document.getElementById(id);
  if (el) el.remove();
}

function maximizeWindow(id) {
  const el = document.getElementById(id);
  if (el) {
    el.style.top = "0px";
    el.style.left = "0px";
    el.style.width = "100vw";
    el.style.height = "100vh";
  }
}

function minimizeWindow(id) {
  const el = document.getElementById(id);
  if (el) {
    el.style.display = "none";
    // å¯æ‰©å±•ä¸ºè®°å½•æœ€å°åŒ–çŠ¶æ€
  }
}
</script>


<div id="taskbar-time" class="taskbar-item" onclick="toggleCalendar()" style="cursor:default /* å·²è®¾ç½®ä¸ºç®­å¤´æŒ‡é’ˆæ ·å¼ */; text-align:right;">
  <div id="clock-time">--:--</div>
  <div id="clock-date">YYYY/MM/DD</div>
</div>
<div id="calendar" style="display:none; position:absolute; bottom:40px; right:10px; background:#fff; border:1px solid #ccc; padding:10px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); z-index:2000;"></div>


<script>
function updateClock() {
  const now = new Date();
  const timeStr = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');
  const dateStr = now.getFullYear() + "/" + (now.getMonth() + 1).toString().padStart(2, '0') + "/" + now.getDate().toString().padStart(2, '0');
  const clockTime = document.getElementById("clock-time");
  const clockDate = document.getElementById("clock-date");
  if (clockTime) clockTime.textContent = timeStr;
  if (clockDate) clockDate.textContent = dateStr;
}
setInterval(updateClock, 1000);
updateClock();

function toggleCalendar() {
  const cal = document.getElementById("calendar");
  if (!cal) return;
  cal.innerHTML = generateCalendar(new Date());
  cal.style.display = (cal.style.display === "block") ? "none" : "block";
}

function generateCalendar(date) {
  const year = date.getFullYear();
  const month = date.getMonth();
  const firstDay = new Date(year, month, 1).getDay();
  const lastDate = new Date(year, month + 1, 0).getDate();

  let html = "<div style='font-weight:bold; margin-bottom:4px;'>" + year + "å¹´" + (month + 1) + "æœˆ</div>";
  html += "<table style='width:100%; text-align:center; font-size:12px'><tr>";
  const days = ["æ—¥", "ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­"];
  for (let d of days) html += "<th>" + d + "</th>";
  html += "</tr><tr>";

  for (let i = 0; i < firstDay; i++) html += "<td></td>";
  for (let d = 1; d <= lastDate; d++) {
    if ((firstDay + d - 1) % 7 === 0) html += "</tr><tr>";
    html += "<td>" + d + "</td>";
  }
  html += "</tr></table>";
  return html;
}
</script>


<ul id="desktop-context-menu" style="position:absolute; display:none; z-index:3000; background:white; border:1px solid #ccc; box-shadow:0 0 10px rgba(0,0,0,0.2); padding:0; margin:0; list-style:none; font-size:14px; border-radius:6px;">
  <li onclick="location.reload()" style="padding:8px 16px; cursor:pointer;">åˆ·æ–°</li>
  <li onclick="openWindow('settings', 'ä¸ªæ€§åŒ–', 'settings.html')" style="padding:8px 16px; cursor:pointer;">ä¸ªæ€§åŒ–</li>
</ul>
<script>
document.addEventListener('contextmenu', function(e) {
  e.preventDefault();
  const menu = document.getElementById('desktop-context-menu');
  if (menu) {
    menu.style.display = 'block';
    menu.style.left = e.pageX + 'px';
    menu.style.top = e.pageY + 'px';
  }
});
document.addEventListener('click', function() {
  const menu = document.getElementById('desktop-context-menu');
  if (menu) menu.style.display = 'none';
});
</script>

<div id="weather-time-widget" style="position:absolute; top:10px; right:10px; background:rgba(255,255,255,0.95); border-radius:12px; padding:8px 12px; box-shadow:0 0 8px rgba(0,0,0,0.2); font-size:12px; cursor:move; z-index:1000;">
  <div id="weather-location">åŠ è½½ä¸­...</div>
  <div id="weather-temp">--Â°C</div>
  <div id="weather-desc">---</div>
  <div style="text-align:right;"><span onclick="document.getElementById('weather-time-widget').style.display='none'" style="cursor:pointer;">âœ–</span></div>
</div>
<script>
async function loadWeather() {
  try {
    const res = await fetch('https://wttr.in/?format=j1');
    const data = await res.json();
    const loc = data.nearest_area[0].areaName[0].value;
    const temp = data.current_condition[0].temp_C;
    const desc = data.current_condition[0].weatherDesc[0].value;
    document.getElementById('weather-location').textContent = loc;
    document.getElementById('weather-temp').textContent = temp + 'Â°C';
    document.getElementById('weather-desc').textContent = desc;
  } catch (e) {
    document.getElementById('weather-location').textContent = 'å¤©æ°”åŠ è½½å¤±è´¥';
  }
}
loadWeather();
</script>


<script>
/* å¼€å§‹èœå•å±•å¼€/å…³é—­å‡½æ•°ä¿®å¤ */
function toggleStartMenu() {
  const menu = document.getElementById('start-menu');
  if (!menu) return;
  if (menu.style.display === 'block') {
    menu.style.display = 'none';
  } else {
    menu.style.display = 'block';
  }
}
</script>
</body>
</html>
